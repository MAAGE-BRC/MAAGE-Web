<script>
dojoConfig = {
    parseOnLoad: false,
    packages: [
      {name: 'lazyload', location: "../lazyload", main: 'lazyload'},
      {name: 'jDataView', location: '../jDataView/src', main: 'jdataview'},
      {name: "FileSaver", location: "../FileSaver", main: "FileSaver"}
    ]
  };
</script>

<script src="https://unpkg.com/lucide@latest"></script>
<script>
lucide.createIcons();
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const closeBtn = document.getElementById('close-banner');
    const banner = document.getElementById('maage-banner');

    if (closeBtn && banner) {
      closeBtn.addEventListener('click', () => {
        banner.style.display = 'none';
      });
    }
  });
</script>

<script>
  const advancedToggle = document.getElementById('advancedToggle');
  const advancedPanel = document.getElementById('advancedPanel');
  const chevronDown = document.querySelector('.chevron-down');
  const chevronUp = document.querySelector('.chevron-up');

  if (advancedToggle && advancedPanel && chevronDown && chevronUp) {
    advancedToggle.addEventListener('click', function() {
      const isVisible = advancedPanel.style.display === 'block';

      if (isVisible) {
        advancedPanel.style.display = 'none';
        chevronDown.style.display = 'block';
        chevronUp.style.display = 'none';
      } else {
        advancedPanel.style.display = 'block';
        chevronDown.style.display = 'none';
        chevronUp.style.display = 'block';
      }
    });
  }
</script>



<script>
  // Smooth scrolling
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();

      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);

      if (targetElement) {
        window.scrollTo({
          top: targetElement.offsetTop - 20,
          behavior: 'smooth'
        });
      }
    });
  });
</script>

<%
const load_scripts = [
  "msa/dist/msa.min.js",
  "bvbrc_js_client/dist/bvbrc_client.js",
  "bundle/bundle.js",
  "bundle/bundle2.js"
]
%>

<% if (request && request.production){ %>
  <% load_scripts.forEach(function(url){ %>
    <script type="text/javascript" src="/js/<%- request.package.version %>/<%- url %>"></script>
  <% }) %>
<% } else { %>
  <% load_scripts.forEach(function(url){ %>
    <script type="text/javascript" src="/js/<%- url %>"></script>
  <% }) %>
<% } %>

<% if (request && request.production){ %>
  <script src="/js/<%- request.package.version %>/dojo/dojo.js"></script>
  <script>
  require(<%- JSON.stringify(request.productionLayers) %>, function(){
    <% } else { %>
      <script src="/js/dojo/dojo.js"></script>
      <script>
      <% } %>
      require(["<%= request.applicationModule %>"], function(App){
        appOpts = <%- JSON.stringify(request.applicationOptions || {}) %>;
        appOpts.workspaceAPI = "<%= request.applicationOptions.workspaceServiceURL %>";
        appOpts.serviceAPI = "<%= request.applicationOptions.appServiceURL %>";
        appOpts.dataAPI = "<%= request.applicationOptions.dataServiceURL %>";
        appOpts.userServiceURL = "<%= request.applicationOptions.userServiceURL %>";
        appOpts.mailinglistURL = "<%= request.applicationOptions.mailinglistURL %>";
        appOpts.localStorageCheckInterval = "<%= request.applicationOptions.localStorageCheckInterval %>";
        window.App = new App(appOpts);
      });
      <% if (request && request.production){ %>
      });
      <% } %>
      </script>

